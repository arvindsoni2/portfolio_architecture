%%{init: {
  "theme": "base",
  "themeVariables": {
    "primaryColor": "#DEEAF1",
    "primaryTextColor": "#1A1A1A",
    "primaryBorderColor": "#2E75B6",
    "lineColor": "#2E75B6",
    "secondaryColor": "#F0F4F8",
    "tertiaryColor": "#EAF3EA",
    "background": "#FFFFFF",
    "fontSize": "14px",
    "fontFamily": "Arial"
  }
}}%%

flowchart TB

    %% â”€â”€ LEGACY ESTATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph LEGACY["âš ï¸  Legacy Estate  â€”  Pre-Modernisation"]
        direction LR
        L1["ğŸ”´ Windows Server 2000/2003<br/>End of support 2015<br/>No security patches"]
        L2["ğŸ”´ Windows Server 2008/R2<br/>End of support 2020<br/>Extended support costs"]
        L3["ğŸŸ¡ Oracle Databases<br/>Tightly coupled to OS<br/>Version dependency risks"]
        L4["ğŸŸ¡ 30+ Legacy Applications<br/>SCADA-adjacent workloads<br/>Undocumented dependencies"]
    end

    %% â”€â”€ DISCOVERY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph DISC["ğŸ”  Discovery &amp; Risk Stratification"]
        direction LR
        D1["ğŸ“‹ Application Portfolio Audit<br/>120+ servers catalogued<br/>Owner Â· function Â· criticality scored"]
        D2["ğŸ—ºï¸ Dependency Mapping<br/>Server â†” App â†” DB â†” Network<br/>Migration sequencing constraints"]
        D3["âš–ï¸ Risk Stratification<br/>ğŸ”´ Tier 1: SCADA-adjacent Â· Critical<br/>ğŸŸ¡ Tier 2: Business apps Â· Medium<br/>ğŸŸ¢ Tier 3: Low-risk workloads"]
    end

    %% â”€â”€ PHASE 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph PH1["ğŸ”µ  Phase 1  â€”  Tactical Lift &amp; Shift  (Tier 3 â€” Low Risk)"]
        direction LR
        P1A["ğŸ–¥ï¸ Target: Windows Server 2016/2019<br/>In-place upgrade or new VM (VMware)<br/>Parallel run before cut-over"]
        P1B["âœ… Validation Gates<br/>Functional smoke tests<br/>Performance benchmarks<br/>Security scan (Nessus)"]
        P1C["ğŸ”„ Staged Cut-Over<br/>Non-prod â†’ UAT â†’ Prod<br/>Rollback window held open 48hrs"]
    end

    %% â”€â”€ PHASE 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph PH2["ğŸŸ£  Phase 2  â€”  Complex Legacy Transformation  (Tier 1 &amp; 2 â€” High Risk)"]
        direction LR
        P2A["âš™ï¸ App Re-Architecture<br/>Decouple OS dependencies<br/>API abstraction layer added"]
        P2B["ğŸ—„ï¸ Oracle DB Upgrade<br/>Schema compatibility testing<br/>DBA-supervised migration"]
        P2C["ğŸ” Blue/Green Deployment<br/>Full parallel environment<br/>Instant rollback Â· Zero downtime"]
    end

    %% â”€â”€ DECOMMISSION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph DECOM["ğŸ—‘ï¸  Decommission &amp; Retirement"]
        direction LR
        DC1["ğŸ“¦ 30+ Apps Retired or Merged<br/>Licence costs eliminated<br/>Config baseline updated"]
        DC2["ğŸ§¹ Server Decommission<br/>Data wiped (DoD 5220.22-M)<br/>Hardware repurposed / scrapped"]
    end

    %% â”€â”€ TARGET ESTATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph TARGET["âœ…  Target Estate  â€”  Post-Modernisation"]
        direction LR
        T1["ğŸŸ¢ Windows Server 2016/2019<br/>Mainstream support to 2027+<br/>Full patch compliance"]
        T2["ğŸŸ¢ Oracle DB (upgraded)<br/>Supported versions<br/>Performance optimised"]
        T3["ğŸŸ¢ VMware vSphere<br/>Virtualised fleet<br/>Snapshot-based rollback enabled"]
    end

    %% â”€â”€ GOVERNANCE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph GOV["ğŸ“œ  ITIL / CAB Governance  (Applied to Every Change)"]
        direction LR
        G1["ğŸ“ RFC per Change<br/>Impact &amp; rollback documented<br/>Pre-approved by CAB"]
        G2["ğŸ›ï¸ Change Advisory Board<br/>Weekly review Â· Emergency CAB<br/>for P1 issues"]
        G3["ğŸ”™ Rollback Procedures<br/>Defined &amp; tested in non-prod<br/>before every production change"]
        G4["ğŸ”¬ Post-Implementation Review<br/>Success criteria verified<br/>Lessons captured per phase"]
    end

    %% â”€â”€ CROSS-FUNCTIONAL TEAMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph TEAMS["ğŸ‘¥  Cross-Functional Sign-Off Teams  (Gate at Each Phase)"]
        direction LR
        TM1["ğŸ”’ Security Architecture<br/>Patch compliance sign-off<br/>Pen test &amp; vulnerability scan"]
        TM2["ğŸ—„ï¸ DBA Team<br/>Oracle schema migration<br/>Performance validation"]
        TM3["ğŸŒ Network Team<br/>VLAN &amp; firewall rules<br/>DNS cutover coordination"]
        TM4["âš¡ Application Teams<br/>Functional test sign-off<br/>Smoke test per workload"]
    end

    %% â”€â”€ OUTCOMES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph OUT["ğŸ†  Programme Outcomes"]
        direction LR
        O1["ğŸ’° Â£400K<br/>Annual extended<br/>support costs eliminated"]
        O2["ğŸ–¥ï¸ 120+ Servers<br/>migrated to<br/>supported OS"]
        O3["ğŸ—‘ï¸ 30+ Apps<br/>decommissioned<br/>tech debt retired"]
        O4["ğŸ”’ Zero downtime<br/>Zero business<br/>disruption"]
        O5["âœ… Full patch<br/>compliance<br/>achieved"]
    end

    %% â”€â”€ FLOWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    L1 & L2 & L3 & L4 -->|"Audit &amp; catalogue"| D1
    D1 --> D2 --> D3

    D3 -->|"Tier 3 workloads"| P1A
    D3 -->|"Tier 1 &amp; 2 workloads"| P2A

    P1A --> P1B --> P1C
    P2A --> P2B --> P2C

    P1C -->|"Server retired"| DECOM
    P2C -->|"Legacy app retired"| DECOM

    PH1 & PH2 --> TARGET
    TARGET & DECOM --> OUT

    %% â”€â”€ STYLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    classDef legacyStyle  fill:#FFEBEE,stroke:#C62828,color:#1A1A1A
    classDef discStyle    fill:#FFF8DC,stroke:#DAA520,color:#1A1A1A
    classDef ph1Style     fill:#E3F2FD,stroke:#1565C0,color:#1A1A1A
    classDef ph2Style     fill:#EDE7F6,stroke:#7B1FA2,color:#1A1A1A
    classDef decomStyle   fill:#ECEFF1,stroke:#546E7A,color:#1A1A1A
    classDef targetStyle  fill:#E8F5E9,stroke:#388E3C,color:#1A1A1A
    classDef govStyle     fill:#FFF3E0,stroke:#E65100,color:#1A1A1A
    classDef teamStyle    fill:#F3E5F5,stroke:#6A1B9A,color:#1A1A1A
    classDef outStyle     fill:#E8F5E9,stroke:#2E7D32,color:#1A1A1A

    class L1,L2,L3,L4 legacyStyle
    class D1,D2,D3 discStyle
    class P1A,P1B,P1C ph1Style
    class P2A,P2B,P2C ph2Style
    class DC1,DC2 decomStyle
    class T1,T2,T3 targetStyle
    class G1,G2,G3,G4 govStyle
    class TM1,TM2,TM3,TM4 teamStyle
    class O1,O2,O3,O4,O5 outStyle
